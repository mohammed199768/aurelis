const translations = {
    en: {
        nav_home: "Home",
        nav_about: "About",
        nav_services: "Services",
        nav_whyus: "Why Us",
        nav_testimonials: "Testimonials",
        nav_blog: "Blog",
        nav_contact: "Contact",
        nav_menu: "Menu",
        btn_book: "Book Appointment",
        btn_explore: "Explore Services",
        btn_more: "Learn More",

        hero_title: "Redefining Modern Dentistry",
        hero_subtitle: "Precision care. Timeless smiles. Global standards.",

        years_exp: "Years of\nExperience",
        about_subtitle: "Who We Are",
        about_title: "Experience the Art of Dentistry",
        about_desc: "At Aurelis Dental, dentistry is not a routine procedure—it is a crafted experience. We combine advanced dental technology, aesthetic excellence, and patient-centered care to deliver results that feel natural, confident, and lasting.",
        about_point1: "Advanced Technology",
        about_point2: "Expert Doctors",
        about_point3: "Personalized Care",

        whyus_subtitle: "Why Choose Us",
        whyus_title: "Excellence in Every Detail",
        feat_1_title: "Expert Doctors",
        feat_1_desc: "Highly experienced dentists with accredited certifications.",
        feat_2_title: "Modern Technology",
        feat_2_desc: "The latest dental devices and treatment technologies.",
        feat_3_title: "Safe Environment",
        feat_3_desc: "Sterile and safe environment following highest medical standards.",
        feat_4_title: "Transparent Plans",
        feat_4_desc: "Clear and transparent treatment plans with no hidden costs.",
        feat_5_title: "Patient Care",
        feat_5_desc: "Genuine interest in patient comfort and pain reduction.",

        services_subtitle: "Our Services",
        services_title: "Comprehensive Dental Solutions",
        srv_1_title: "General Dentistry",
        srv_1_desc: "Regular checkups, cleaning, cavity treatment, and fillings to maintain long-term dental health.",
        srv_2_title: "Cosmetic Dentistry",
        srv_2_desc: "Hollywood smile, teeth whitening, veneers, and luminaires for a natural look that reflects your confidence.",
        srv_3_title: "Orthodontics",
        srv_3_desc: "Metal and clear braces (Invisalign), effective solutions for various ages to achieve perfect teeth alignment.",
        srv_4_title: "Dental Implants",
        srv_4_desc: "Permanent replacement for missing teeth using the latest global implant systems with natural and safe results.",

        testi_subtitle: "Testimonials",
        testi_title: "What Our Patients Say",
        testi_1_text: "Excellent experience from the first visit, classy treatment and wonderful results.",
        testi_1_author: "Sarah M.",

        faq_subtitle: "FAQ",
        faq_title: "Common Questions",
        faq_desc: "Find answers to the most frequently asked questions about our dental services and procedures.",
        faq_1_q: "Is the treatment painful?",
        faq_1_a: "We are keen to use the latest anesthesia and treatment techniques to reduce pain as much as possible.",
        faq_2_q: "Do you offer personalized treatment plans?",
        faq_2_a: "Yes, each case is studied individually and a treatment plan is drawn up to suit the patient's needs.",
        faq_3_q: "Is the clinic sterile?",
        faq_3_a: "We adhere to the highest medically approved sterilization and safety standards.",

        blog_subtitle: "Our Blog",
        blog_title: "Latest Updates",
        read_more: "Read More",
        blog_1_title: "How to maintain your dental health daily?",
        blog_2_title: "Difference between home and professional whitening",
        blog_3_title: "When do you need orthodontics?",

        footer_brand_desc: "We don’t treat teeth. We care for people, precision, and long-term trust.",
        footer_contact: "Contact Us",
        contact_address: "123 Medical Center Dr, Suite 100",
        footer_hours: "Hours",
        contact_hours: "Sat - Thu: 9:00 AM - 7:00 PM",
        contact_closed: "Friday: Closed",
        footer_hours: "Hours",
        contact_hours: "Sat - Thu: 9:00 AM - 7:00 PM",
        contact_closed: "Friday: Closed",
        footer_rights: "All Rights Reserved.",

        contact_subtitle: "Get In Touch",
        contact_title: "Book Your Appointment",
        contact_desc: "We are here to answer any questions you may have about our dental services. Reach out to us and we'll respond as soon as we can.",
        form_name_placeholder: "Your Name",
        form_email_placeholder: "Your Email",
        form_phone_placeholder: "Phone Number",
        form_service_placeholder: "Select Service",
        form_service_select: "Select Service",
        form_message_placeholder: "Message",
        btn_submit: "Send Message"
    },
    ar: {
        nav_home: "الرئيسية",
        nav_about: "من نحن",
        nav_services: "خدماتنا",
        nav_whyus: "لماذا نحن",
        nav_testimonials: "آراء المرضى",
        nav_blog: "المدونة",
        nav_contact: "اتصل بنا",
        nav_menu: "القائمة",
        btn_book: "احجز موعدك الآن",
        btn_explore: "استكشف الخدمات",
        btn_more: "اقرأ المزيد",

        hero_title: "ابتسامتك تبدأ من هنا",
        hero_subtitle: "رعاية متكاملة لطب الأسنان بأحدث التقنيات، لأن راحتك وثقتك تستحق الأفضل.",

        years_exp: "سنوات من\nالخبرة",
        about_subtitle: "من نحن",
        about_title: "تجربة إنسانية متكاملة",
        about_desc: "نحن عيادة متخصصة في تقديم خدمات طب الأسنان وفق أعلى المعايير الطبية والأخلاقية. نعمل بشغف لتقديم رعاية طبية دقيقة، باستخدام أحدث ما توصل إليه العلم، مع الحرص على توفير تجربة مريحة وآمنة.",
        about_point1: "أحدث التقنيات",
        about_point2: "أطباء خبراء",
        about_point3: "رعاية شخصية",

        whyus_subtitle: "لماذا نحن؟",
        whyus_title: "التميز في كل التفاصيل",
        feat_1_title: "أطباء ذوو خبرة",
        feat_1_desc: "أطباء أسنان ذوو خبرة عالية وشهادات معتمدة.",
        feat_2_title: "أحدث الأجهزة",
        feat_2_desc: "أحدث أجهزة وتقنيات علاج الأسنان لضمان أفضل النتائج.",
        feat_3_title: "بيئة آمنة",
        feat_3_desc: "بيئة معقمة وآمنة وفق أعلى المعايير الطبية.",
        feat_4_title: "خطط شفافة",
        feat_4_desc: "خطط علاج واضحة وشفافة بدون تكاليف خفية.",
        feat_5_title: "راحة المريض",
        feat_5_desc: "اهتمام حقيقي براحة المريض وتقليل الألم.",

        services_subtitle: "خدماتنا",
        services_title: "حلول متكاملة لأسنانك",
        srv_1_title: "طب الأسنان العام",
        srv_1_desc: "فحوصات دورية، تنظيف الأسنان، علاج التسوس، وحشوات تجميلية تحافظ على صحة أسنانك.",
        srv_2_title: "تجميل الأسنان",
        srv_2_desc: "ابتسامة هوليوود، تبييض الأسنان، الفينير واللومينير، لإطلالة طبيعية تعكس ثقتك بنفسك.",
        srv_3_title: "تقويم الأسنان",
        srv_3_desc: "تقويم معدني وشفاف (Invisalign)، حلول فعالة لمختلف الأعمار لتحقيق اصطفاف مثالي للأسنان.",
        srv_4_title: "زراعة الأسنان",
        srv_4_desc: "تعويض دائم للأسنان المفقودة باستخدام أحدث أنظمة الزراعة العالمية وبنتائج طبيعية وآمنة.",

        testi_subtitle: "آراء المرضى",
        testi_title: "ماذا يقول عملاؤنا",
        testi_1_text: "تجربة ممتازة من أول زيارة، تعامل راقٍ ونتائج رائعة.",
        testi_1_author: "سارة م.",

        faq_subtitle: "الأسئلة الشائعة",
        faq_title: "أسئلة شائعة",
        faq_desc: "اعثر على إجابات للأسئلة الأكثر شيوعًا حول خدماتنا.",
        faq_1_q: "هل العلاج مؤلم؟",
        faq_1_a: "نحرص على استخدام أحدث تقنيات التخدير والعلاج لتقليل الألم قدر الإمكان.",
        faq_2_q: "هل تقدمون خطط علاج مخصصة؟",
        faq_2_a: "نعم، كل حالة تُدرس بشكل فردي ويتم وضع خطة علاج تناسب احتياجات المريض.",
        faq_3_q: "هل العيادة معقمة؟",
        faq_3_a: "نلتزم بأعلى معايير التعقيم والسلامة المعتمدة طبيًا.",

        blog_subtitle: "المدونة",
        blog_title: "آخر المقالات",
        read_more: "اقرأ المقال",
        blog_1_title: "كيف تحافظ على صحة أسنانك يوميًا؟",
        blog_2_title: "الفرق بين التبييض المنزلي والاحترافي",
        blog_3_title: "متى تحتاج إلى تقويم الأسنان؟",

        footer_brand_desc: "نحن لا نعالج الأسنان فقط، بل نهتم بالإنسان، بالدقة، وبالثقة طويلة الأمد.",
        footer_contact: "تواصل معنا",
        contact_address: "شارع المركز الطبي، مبنى 100",
        footer_hours: "ساعات العمل",
        contact_hours: "السبت - الخميس: 9:00 ص - 7:00 م",
        contact_closed: "الجمعة: مغلق",
        footer_rights: "جميع الحقوق محفوظة.",

        contact_subtitle: "تواصل معنا",
        contact_title: "احجز موعدك",
        contact_desc: "نحن هنا للإجابة على أي أسئلة قد تكون لديكم حول خدمات طب الأسنان لدينا. تواصل معنا وسنرد عليك في أقرب وقت ممكن.",
        form_name_placeholder: "الاسم",
        form_email_placeholder: "البريد الإلكتروني",
        form_phone_placeholder: "رقم الهاتف",
        form_service_placeholder: "اختر الخدمة",
        form_service_select: "اختر الخدمة",
        form_message_placeholder: "الرسالة",
        btn_submit: "إرسال الرسالة"
    }
};

const data = {
    features: [
        { icon: 'fa-user-doctor', titleI18n: 'feat_1_title', descI18n: 'feat_1_desc' },
        { icon: 'fa-microscope', titleI18n: 'feat_2_title', descI18n: 'feat_2_desc' },
        { icon: 'fa-shield-virus', titleI18n: 'feat_3_title', descI18n: 'feat_3_desc' },
        { icon: 'fa-file-invoice', titleI18n: 'feat_4_title', descI18n: 'feat_4_desc', specialIconClass: 'dollar' },
        { icon: 'fa-heart-pulse', titleI18n: 'feat_5_title', descI18n: 'feat_5_desc' }
    ],
    services: [
        {
            num: '01',
            titleI18n: 'srv_1_title',
            descI18n: 'srv_1_desc',
            img: 'https://plus.unsplash.com/premium_photo-1661434856831-76779e04e8bc?q=80&w=838&auto=format&fit=crop',
            value: 'general'
        },
        {
            num: '02',
            titleI18n: 'srv_2_title',
            descI18n: 'srv_2_desc',
            img: 'https://images.unsplash.com/photo-1598256989800-fe5f95da9787?q=80&w=2070&auto=format&fit=crop',
            value: 'cosmetic'
        },
        {
            num: '03',
            titleI18n: 'srv_3_title',
            descI18n: 'srv_3_desc',
            img: 'https://images.unsplash.com/photo-1571772996211-2f02c9727629?q=80&w=2070&auto=format&fit=crop',
            value: 'orthodontics'
        },
        {
            num: '04',
            titleI18n: 'srv_4_title',
            descI18n: 'srv_4_desc',
            img: 'https://plus.unsplash.com/premium_photo-1661775756810-82dbd209fc95?q=80&w=2070&auto=format&fit=crop',
            value: 'implants'
        }
    ],
    testimonials: [
        {
            textI18n: 'testi_1_text',
            authorI18n: 'testi_1_author'
        }
    ],
    faq: [
        { qI18n: 'faq_1_q', aI18n: 'faq_1_a' },
        { qI18n: 'faq_2_q', aI18n: 'faq_2_a' },
        { qI18n: 'faq_3_q', aI18n: 'faq_3_a' }
    ],
    blog: [
        {
            img: 'https://images.unsplash.com/photo-1616391182219-e080b4d1043a?q=80&w=783&auto=format&fit=crop',
            date: 'Oct 12, 2023',
            titleI18n: 'blog_1_title'
        },
        {
            img: 'https://images.unsplash.com/photo-1606811971618-4486d14f3f99?q=80&w=774&auto=format&fit=crop',
            date: 'Sep 28, 2023',
            titleI18n: 'blog_2_title'
        },
        {
            img: 'https://plus.unsplash.com/premium_photo-1672922646387-9ddf2049ba93?q=80&w=387&auto=format&fit=crop',
            date: 'Sep 15, 2023',
            titleI18n: 'blog_3_title'
        }
    ]
};

document.addEventListener('DOMContentLoaded', () => {
    // --- Render Dynamic Content ---

    // Features
    const featuresContainer = document.querySelector('.features-grid .grid-3');
    if (featuresContainer) {
        featuresContainer.innerHTML = data.features.map(item => `
            <div class="feature-card">
                <div class="icon"><i class="fa-solid ${item.icon} ${item.specialIconClass || ''}"></i></div>
                <h3 data-i18n="${item.titleI18n}"></h3>
                <p data-i18n="${item.descI18n}"></p>
            </div>
        `).join('');
    }

    // Services
    const servicesContainer = document.querySelector('.services-list');
    if (servicesContainer) {
        servicesContainer.innerHTML = data.services.map(item => `
            <div class="service-item">
                <div class="service-info">
                    <span class="num">${item.num}</span>
                    <h3 data-i18n="${item.titleI18n}"></h3>
                    <p data-i18n="${item.descI18n}"></p>
                </div>
                <div class="service-img">
                    <img src="${item.img}" alt="Service Image">
                </div>
            </div>
        `).join('');
    }

    // Testimonials
    const testimonialSlider = document.querySelector('.testimonial-slider');
    if (testimonialSlider) {
        testimonialSlider.innerHTML = data.testimonials.map((item, index) => `
            <div class="testimonial-card ${index === 0 ? 'active' : ''}">
                <div class="quote-icon"><i class="fa-solid fa-quote-left"></i></div>
                <p class="review" data-i18n="${item.textI18n}"></p>
                <h5 class="author" data-i18n="${item.authorI18n}"></h5>
            </div>
        `).join('');
    }

    // FAQ
    const faqContainer = document.querySelector('.faq .col-accordion');
    if (faqContainer) {
        faqContainer.innerHTML = data.faq.map(item => `
            <div class="accordion-item">
                <div class="accordion-header">
                    <h3 data-i18n="${item.qI18n}"></h3>
                    <span class="icon">+</span>
                </div>
                <div class="accordion-body">
                    <p data-i18n="${item.aI18n}"></p>
                </div>
            </div>
        `).join('');
    }

    // Blog
    const blogContainer = document.querySelector('.blog .grid-3');
    if (blogContainer) {
        blogContainer.innerHTML = data.blog.map(item => `
            <div class="blog-card">
                <div class="blog-img">
                    <img src="${item.img}" alt="Blog Image">
                </div>
                <div class="blog-content">
                    <span class="date">${item.date}</span>
                    <h3 data-i18n="${item.titleI18n}"></h3>
                    <a href="#" class="read-more" data-i18n="read_more">Read More</a>
                </div>
            </div>
        `).join('');
    }

    // --- Logic & Event Listeners ---

    // Language Toggle
    const langBtn = document.getElementById('lang-toggle');
    const currentLangSpan = langBtn.querySelector('.current-lang');
    let currentLang = 'en';

    function setLanguage(lang) {
        currentLang = lang;
        document.documentElement.setAttribute('lang', lang);
        document.documentElement.setAttribute('dir', lang === 'ar' ? 'rtl' : 'ltr');
        document.documentElement.setAttribute('data-lang', lang);

        // Update Text
        const elements = document.querySelectorAll('[data-i18n]');
        elements.forEach(el => {
            const key = el.getAttribute('data-i18n');
            if (translations[lang] && translations[lang][key]) {
                el.innerText = translations[lang][key];
                if (translations[lang][key].includes('\n')) {
                    el.innerHTML = translations[lang][key].replace(/\n/g, '<br>');
                }
            }
        });

        // Update Placeholders
        const placeholders = document.querySelectorAll('[data-i18n-placeholder]');
        placeholders.forEach(el => {
            const key = el.getAttribute('data-i18n-placeholder');
            if (translations[lang] && translations[lang][key]) {
                el.setAttribute('placeholder', translations[lang][key]);
            }
        });

        currentLangSpan.textContent = lang === 'ar' ? 'EN' : 'AR';
    }

    langBtn.addEventListener('click', () => {
        const newLang = currentLang === 'en' ? 'ar' : 'en';
        setLanguage(newLang);
    });

    // Navbar Scroll
    const navbar = document.querySelector('.navbar');
    window.addEventListener('scroll', () => {
        if (window.scrollY > 50) {
            navbar.classList.add('scrolled');
        } else {
            navbar.classList.remove('scrolled');
        }
    });

    // Mobile Menu
    const hamburger = document.querySelector('.hamburger');
    const mobileMenu = document.querySelector('.mobile-menu');
    const mobileLinks = document.querySelectorAll('.mobile-links a');

    hamburger.addEventListener('click', () => {
        mobileMenu.classList.toggle('active');
        hamburger.classList.toggle('active'); // For animation
    });

    // Bottom Nav Menu Trigger
    const mobileTrigger = document.getElementById('mobile-menu-trigger');
    if (mobileTrigger) {
        mobileTrigger.addEventListener('click', (e) => {
            e.preventDefault(); // Prevent jump
            mobileMenu.classList.toggle('active');
        });
    }

    mobileLinks.forEach(link => {
        link.addEventListener('click', () => {
            mobileMenu.classList.remove('active');
            hamburger.classList.remove('active');
        });
    });

    // Close mobile menu when clicking outside
    document.addEventListener('click', (e) => {
        if (mobileMenu.classList.contains('active') && !mobileMenu.contains(e.target) && !hamburger.contains(e.target)) {
            mobileMenu.classList.remove('active');
            hamburger.classList.remove('active');
        }
    });

    // Accordion Logic (Attached dynamically)
    // Since we generated content safely before, we can attach listeners now
    // HOWEVER, we need to re-query the DOM elements
    const accordionHeaders = document.querySelectorAll('.accordion-header');
    accordionHeaders.forEach(acc => {
        acc.addEventListener('click', () => {
            const item = acc.parentElement;
            const body = item.querySelector('.accordion-body');

            document.querySelectorAll('.accordion-item').forEach(other => {
                if (other !== item) {
                    other.classList.remove('active');
                    other.querySelector('.accordion-body').style.height = 0;
                }
            });

            item.classList.toggle('active');
            if (item.classList.contains('active')) {
                body.style.height = body.scrollHeight + 'px';
            } else {
                body.style.height = 0;
            }
        });
    });

    // Contact Form
    const contactForm = document.querySelector('.contact-form');
    if (contactForm) {
        contactForm.addEventListener('submit', (e) => {
            e.preventDefault();
            alert(currentLang === 'en' ? 'Thank you! We will contact you soon.' : 'شكراً لك! سنتواصل معك قريباً.');
            contactForm.reset();
        });
    }

    // Blog Modal
    const modal = document.getElementById('blog-modal');
    // Function to attach listeners to dynamic blog cards
    function attachBlogListeners() {
        const blogCards = document.querySelectorAll('.blog-card');
        const modalImg = modal ? modal.querySelector('.modal-img img') : null;
        const modalDate = modal ? modal.querySelector('.modal-date') : null;
        const modalTitle = modal ? modal.querySelector('.modal-title') : null;
        const modalDesc = modal ? modal.querySelector('.modal-desc') : null;

        if (modal && blogCards.length > 0) {
            blogCards.forEach(card => {
                card.addEventListener('click', (e) => {
                    e.preventDefault();
                    const imgSrc = card.querySelector('.blog-img img').src;
                    const date = card.querySelector('.date').textContent;
                    const title = card.querySelector('h3').textContent;

                    if (modalImg) modalImg.src = imgSrc;
                    if (modalDate) modalDate.textContent = date;
                    if (modalTitle) modalTitle.textContent = title;

                    const dummyContent = currentLang === 'en' ?
                        `<p>Dental health is crucial for overall well-being. Start by brushing twice a day with fluoride toothpaste.</p><p>Don't forget to floss daily to remove plaque from between teeth where your toothbrush can't reach. Visit your dentist regularly for checkups.</p>` :
                        `<p>صحة الأسنان ضرورية للصحة العامة. ابدأ بتنظيف أسنانك بالفرشاة مرتين يوميًا باستخدام معجون أسنان يحتوي على الفلورايد.</p><p>لا تنس استخدام خيط الأسنان يوميًا لإزالة البلاك من بين الأسنان حيث لا تصل الفرشاة. قم بزيارة طبيب الأسنان بانتظام لإجراء الفحوصات.</p>`;

                    if (modalDesc) modalDesc.innerHTML = dummyContent;

                    modal.style.display = 'block';
                    setTimeout(() => modal.classList.add('show'), 10);
                    document.body.style.overflow = 'hidden';
                });
            });
        }
    }
    attachBlogListeners();

    // Modal Close Logic
    const closeModal = document.querySelector('.close-modal');
    function hideModal() {
        if (!modal) return;
        modal.classList.remove('show');
        setTimeout(() => {
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
        }, 300);
    }
    if (closeModal) closeModal.addEventListener('click', hideModal);
    window.addEventListener('click', (e) => {
        if (e.target == modal) hideModal();
    });

    // Initialize
    setLanguage('en');
});
